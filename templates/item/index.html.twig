<h2>Items</h2>
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Tags</th>
      <th scope="col">Likes</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for item in collection.item %}
      <tr>
        <th scope="row">1</th>
        <td>{{ item.name }}</td>
        <td>{{ item.tags }}</td>
        <td>{{ item.likes ? item.likes.users|length : 0 }}</td>
        <td>
          {% if item.likes %}
            {% set doILiked = item.likes.users|filter(u => u.email == app.user.email)|first %}
            {% if doILiked %}
              <a href={{ path('app_like', {id: item.id}) }} class="btn btn-primary">👍 Like</a>
            {% else %}
              <a href={{ path('app_like', {id: item.id}) }} class="btn btn-outline-primary">👍 Like</a>
            {% endif %}
          {% else %}
            <a href={{ path('app_like', {id: item.id}) }} class="btn btn-outline-primary">👍 Like</a>
          {% endif %}

          {% if app.user and app.user.email == collection.user.email %}
            <a href={{ path('app_item_edit', {id: item.id}) }} class="btn btn-warning">Edit</a>
            <a href={{ path('app_item_delete', {id: item.id}) }} class="btn btn-outline-danger">Delete</a>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>